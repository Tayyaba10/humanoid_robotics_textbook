"use strict";(globalThis.webpackChunkhumanoid_robotics_textbook=globalThis.webpackChunkhumanoid_robotics_textbook||[]).push([[565],{1470:(e,t,a)=>{a.d(t,{A:()=>A});var n=a(6540),r=a(4164),i=a(7559),s=a(3104),o=a(6347),l=a(205),c=a(7485),d=a(1682),u=a(679);function h(e){return n.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:t,children:a}=e;return(0,n.useMemo)(()=>{const e=t??function(e){return h(e).map(({props:{value:e,label:t,attributes:a,default:n}})=>({value:e,label:t,attributes:a,default:n}))}(a);return function(e){const t=(0,d.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,a])}function f({value:e,tabValues:t}){return t.some(t=>t.value===e)}function m({queryString:e=!1,groupId:t}){const a=(0,o.W6)(),r=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(r),(0,n.useCallback)(e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})},[r,a])]}function g(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,i=p(e),[s,o]=(0,n.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!f({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=t.find(e=>e.default)??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:i})),[c,d]=m({queryString:a,groupId:r}),[h,g]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,r]=(0,u.Dv)(t);return[a,(0,n.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:r}),b=(()=>{const e=c??h;return f({value:e,tabValues:i})?e:null})();(0,l.A)(()=>{b&&o(b)},[b]);return{selectedValue:s,selectValue:(0,n.useCallback)(e=>{if(!f({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),g(e)},[d,g,i]),tabValues:i}}var b=a(2303);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=a(4848);function w({className:e,block:t,selectedValue:a,selectValue:n,tabValues:i}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,s.a_)(),c=e=>{const t=e.currentTarget,r=o.indexOf(t),s=i[r].value;s!==a&&(l(t),n(s))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=o.indexOf(e.currentTarget)+1;t=o[a]??o[0];break}case"ArrowLeft":{const a=o.indexOf(e.currentTarget)-1;t=o[a]??o[o.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},e),children:i.map(({value:e,label:t,attributes:n})=>(0,v.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...n,className:(0,r.A)("tabs__item",y.tabItem,n?.className,{"tabs__item--active":a===e}),children:t??e},e))})}function x({lazy:e,children:t,selectedValue:a}){const i=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===a);return e?(0,n.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:i.map((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==a}))})}function j(e){const t=g(e);return(0,v.jsxs)("div",{className:(0,r.A)(i.G.tabs.container,"tabs-container",y.tabList),children:[(0,v.jsx)(w,{...t,...e}),(0,v.jsx)(x,{...t,...e})]})}function A(e){const t=(0,b.A)();return(0,v.jsx)(j,{...e,children:h(e.children)},String(t))}},6910:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>h,contentTitle:()=>u,default:()=>m,frontMatter:()=>d,metadata:()=>n,toc:()=>p});const n=JSON.parse('{"id":"safety-failure-analysis","title":"12. Safety and Failure Analysis","description":"Ensuring that humanoid robots can operate safely and reliably.","source":"@site/docs/12-safety-failure-analysis.mdx","sourceDirName":".","slug":"/safety-failure-analysis","permalink":"/humanoid_robotics_textbook/safety-failure-analysis","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"id":"safety-failure-analysis","title":"12. Safety and Failure Analysis","description":"Ensuring that humanoid robots can operate safely and reliably.","sidebar_position":12},"sidebar":"tutorialSidebar","previous":{"title":"11. Hardware-Software Co-Design","permalink":"/humanoid_robotics_textbook/hardware-software-codesign"},"next":{"title":"13. The Road Ahead: Future of Humanoid Robotics","permalink":"/humanoid_robotics_textbook/future-of-humanoids"}}');var r=a(4848),i=a(8453),s=a(418),o=a(3457),l=a(1470),c=a(9365);const d={id:"safety-failure-analysis",title:"12. Safety and Failure Analysis",description:"Ensuring that humanoid robots can operate safely and reliably.",sidebar_position:12},u=void 0,h={},p=[{value:"The First Principle: Do No Harm",id:"the-first-principle-do-no-harm",level:2},{value:"Understanding Failure",id:"understanding-failure",level:3},{value:"Level 1: Proactive Safety Design",id:"level-1-proactive-safety-design",level:3},{value:"Hardware-Level Safety",id:"hardware-level-safety",level:4},{value:"Software-Level Safety",id:"software-level-safety",level:4},{value:"Level 2: Reactive Safety Protocols",id:"level-2-reactive-safety-protocols",level:3},{value:"Level 3: Formal Analysis",id:"level-3-formal-analysis",level:3},{value:"Code Example: Sanity Check and Watchdog Logic",id:"code-example-sanity-check-and-watchdog-logic",level:3}];function f(e){const t={h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"the-first-principle-do-no-harm",children:"The First Principle: Do No Harm"}),"\n",(0,r.jsxs)(t.p,{children:["A humanoid robot is a physically powerful machine designed to operate in unstructured, human-centric environments. This combination makes ",(0,r.jsx)(t.strong,{children:"safety"})," the single most important design consideration, overriding all other performance metrics. A robot that is 99% reliable is a failure if the remaining 1% involves a risk of injury to a person."]}),"\n",(0,r.jsx)(t.p,{children:"Safety is not a feature to be added at the end; it is a principle that must be woven into every layer of the hardware and software stack. This chapter explores the methodologies engineers use to build and validate safe robotic systems."}),"\n",(0,r.jsx)(t.h3,{id:"understanding-failure",children:"Understanding Failure"}),"\n",(0,r.jsx)(t.p,{children:"To build a safe system, we must first understand the ways it can fail. Failures can be broadly categorized:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Hardware Failures:"})," A motor seizes, a power supply fails, a sensor starts returning garbage data due to a broken wire."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Software Failures:"})," A bug in the control loop causes an oscillation, a perception model misidentifies a human as an inanimate object, a planner generates a path that intersects with a forbidden zone."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Unexpected Scenarios:"})," The robot encounters a situation its designers never anticipated, like a slippery, freshly-waxed floor or an object with strange visual properties."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"A robust safety architecture must be prepared to handle all of these."}),"\n",(0,r.jsx)(t.h3,{id:"level-1-proactive-safety-design",children:"Level 1: Proactive Safety Design"}),"\n",(0,r.jsx)(t.p,{children:"The best way to handle a failure is to prevent it from happening in the first place. This is proactive safety."}),"\n",(0,r.jsx)(t.h4,{id:"hardware-level-safety",children:"Hardware-Level Safety"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Compliant Actuators:"}),' As discussed in Chapter 11, using actuators with low gear ratios and good force sensing makes the robot inherently "softer" and safer during physical contact.']}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Lightweight Materials:"})," Using lightweight alloys and composites reduces the robot's overall inertia, lessening the potential force of any impact."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Redundancy:"})," Critical components like power systems, communication buses, and key sensors (like the IMU) should be redundant."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Emergency Stops (E-Stops):"})," A large, physical red button that, when pressed, cuts power to the robot's motors at the hardware level, bypassing all software."]}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"software-level-safety",children:"Software-Level Safety"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Watchdogs:"}),' A "watchdog timer" is a simple, independent process that monitors the "heartbeat" of the main control loop. If the main loop freezes (due to a software bug), it stops sending signals to the watchdog. After a short timeout, the watchdog forces the robot into a safe shutdown state.']}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Sanity Checks:"})," These are assertions and checks embedded throughout the code. They validate that sensor values and commands are within a physically plausible range. For example, if a bug causes the planner to command a joint to move at 1000 radians/second, a sanity check should catch this impossible command and halt the system."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Virtual Fences (Geofencing):"})," A virtual boundary defined in the robot's world model that it is forbidden to cross, preventing it from entering unsafe areas."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"level-2-reactive-safety-protocols",children:"Level 2: Reactive Safety Protocols"}),"\n",(0,r.jsx)(t.p,{children:"When a failure does occur, the robot must react in a way that minimizes harm."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Safe Fall Strategies:"}),' For an unstable bipedal robot, falling is inevitable. Instead of falling like a rigid statue, the robot should have a pre-programmed "fall" behavior. This involves quickly folding its limbs and curling up to absorb the impact, protecting its most valuable components (like its head) and presenting a smaller, smoother profile to whatever it might be falling on.']}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Graceful Degradation:"})," If a non-critical sensor fails (e.g., one of its many cameras), the robot shouldn't just shut down. A safe system will detect the failure and switch to a lower-performance mode that relies on its remaining sensors, perhaps moving more slowly or disabling manipulation tasks until the sensor is fixed."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"level-3-formal-analysis",children:"Level 3: Formal Analysis"}),"\n",(0,r.jsx)(t.p,{children:"To ensure all possibilities are considered, robotics engineers use structured methods to analyze their systems."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"FMEA (Failure Mode and Effects Analysis):"}),' This is a bottom-up, preventative tool. Engineers create a spreadsheet of every component in the system (e.g., "ankle motor encoder"). They then brainstorm all the ways it could fail (e.g., "wire breaks," "signal becomes noisy") and trace the potential effects on the entire system. Each failure is ranked by its Severity, Occurrence, and Detectability, which gives a Risk Priority Number (RPN) to guide mitigation efforts.']}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Hazard Analysis:"}),' This is a top-down approach. Engineers identify system-level hazards (e.g., "Robot swings arm uncontrollably") and work backward to identify all the potential root causes, both in hardware and software.']}),"\n"]}),"\n",(0,r.jsx)(s.A,{chart:"\ngraph TD\n  A(Safety Design)\n  A --\x3e B(Proactive Design);\n  A --\x3e C(Reactive Protocols);\n  A --\x3e D(Formal Analysis);\n\n  subgraph B\n      B1(Compliant Hardware)\n      B2(Software Sanity Checks)\n  end\n  subgraph C\n      C1(Safe Fall Strategies)\n      C2(Graceful Degradation)\n  end\n  subgraph D\n      D1(FMEA)\n      D2(Hazard Analysis)\n  end\n"}),"\n",(0,r.jsx)(t.h3,{id:"code-example-sanity-check-and-watchdog-logic",children:"Code Example: Sanity Check and Watchdog Logic"}),"\n",(0,r.jsx)(t.p,{children:"This conceptual code shows how two core software safety patterns might be implemented."}),"\n",(0,r.jsx)(l.A,{children:(0,r.jsx)(c.A,{value:"python",label:"Python",children:(0,r.jsx)(o.A,{language:"python",children:'import time\n\n# --- Sanity Check Example ---\nMAX_JOINT_VELOCITY = 10.0 # rad/s\n\ndef apply_joint_command(velocity):\n  """Applies a velocity command to a joint after a sanity check."""\n  \n  # This is the sanity check.\n  if abs(velocity) > MAX_JOINT_VELOCITY:\n      print(f"UNSAFE COMMAND: Velocity {velocity:.2f} exceeds max {MAX_JOINT_VELOCITY}. Ignoring command.")\n      # In a real system, this would also trigger a high-level fault.\n      return False\n  \n  print(f"SAFE COMMAND: Applying velocity {velocity:.2f}.")\n  # Code to send command to motor controller would go here.\n  return True\n\n# --- Watchdog Example ---\nlast_heartbeat_time = time.time()\nWATCHDOG_TIMEOUT = 0.1 # seconds. Main loop must "pet" the watchdog faster than this.\n\ndef pet_watchdog():\n  """The main loop calls this function to show it\'s still alive."""\n  global last_heartbeat_time\n  last_heartbeat_time = time.time()\n\ndef check_watchdog():\n  """A separate, high-priority thread would run this function."""\n  if time.time() - last_heartbeat_time > WATCHDOG_TIMEOUT:\n      # The main control loop has frozen!\n      print("WATCHDOG TIMEOUT: Main control loop is unresponsive! Triggering E-Stop.")\n      # Code to cut motor power would go here.\n      return False\n  return True\n\n# --- Simulation ---\nprint("--- Sanity Check Demo ---")\napply_joint_command(5.0)  # Safe\napply_joint_command(-15.0) # Unsafe\n\nprint("\n--- Watchdog Demo ---")\nprint("Simulating a healthy loop...")\npet_watchdog()\ntime.sleep(0.05)\nif check_watchdog():\n  print("Watchdog check passed.")\n\nprint("\nSimulating a frozen loop...")\n# We forget to call pet_watchdog() here.\ntime.sleep(0.2)\nif not check_watchdog():\n  print("Watchdog correctly identified the frozen loop.")\n\n'})})})]})}function m(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(f,{...e})}):f(e)}},9365:(e,t,a)=>{a.d(t,{A:()=>s});a(6540);var n=a(4164);const r={tabItem:"tabItem_Ymn6"};var i=a(4848);function s({children:e,hidden:t,className:a}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,n.A)(r.tabItem,a),hidden:t,children:e})}}}]);